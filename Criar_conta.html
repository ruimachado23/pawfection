<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://fonts.googleapis.com/css?family=Bungee' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src ="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src ="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src ="https://knockoutjs.com/downloads/knockout-3.5.1.debug.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>

    <script src ="https://www.google.com/jsapi" type="text/javascript"></script>
    <title>PawFection </title> 
    <style>
      body {
               font-family: 'Bungee';font-size: 21px;
           }
   </style>
  </head>

<body style="background-color: #B6DCE7;">
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="Pagina_inical.html"><i class="fa-solid fa-paw"></i></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <a class="nav-link" aria-current="page" href="#">Perfil</a>
          <a class="nav-link" href="#">O Meu Animal</a>
          <a class="nav-link" href="#">Encomendar</a>
          </div>
      </div>
    </div>
</nav>
    <div class="container" style="background-color: #B6DCE7; margin-top: 4%;" >
      <div class="row">
        <div class="input-group mt-3">
            <span class="input-group-text" id="Nome1">Nome completo</span>
            <input value="" type="text" class="form-control" id="Nome" placeholder="" aria-label="Username" aria-describedby="Nome1">
          </div>
          <div class="mb-1 d-none" id="nomeinvalido">
            <span class="text-danger ">Nome inválido</span>
                      </div>
          <div class="input-group mt-1">
            <span class="input-group-text" id="Mail1">Email</span>
            <input value="" type="text" class="form-control" id="Mail" placeholder="" aria-label="Username" aria-describedby="Mail1">
          </div>
          <div class="mb-1 d-none" id="Emailinvalido">
<span class="text-danger ">Email inválido</span>
          </div>
          <div class="mb-1 d-none" id="Emailinvalido1">
            <span class="text-warning ">Email já existe</span>
                      </div>
          <div class="input-group mt-1">
            <span class="input-group-text" id="Morada1">Morada</span>
            <input value="" type="text" class="form-control" id="Morada" placeholder="" aria-label="Username" aria-describedby="Morada1">
          </div>
          <div class="mb-1 d-none" id="Moradainvalido">
<span class="text-danger ">Morada inválido</span>
          </div>
          <div class="input-group mt-1">
            <span class="input-group-text" id="Nif1">Nif</span>
            <input value="" type="number" class="form-control" id="Nif" placeholder="" aria-label="Username" aria-describedby="Nif1">
          </div>
          <div class="mb-1 d-none" id="Nifinvalido">
<span class="text-danger ">Nif inválido 8 digitos</span>
          </div>
          <div class="input-group mt-1">
            <span class="input-group-text" id="Password11">Password</span>
            <input value="" type="password" class="form-control" id="Password1" placeholder="" aria-label="Username" aria-describedby="Password11">
          </div>
          <div class="mb-1 d-none" id="PassInvalido">
<span class="text-danger ">Password curta inválida</span>
          </div>
          <div class="input-group mt-1">
            <span class="input-group-text" id="ConfirmarPassword11">Confirmar password</span>
            <input value="" type="password" class="form-control" id="Password2" placeholder="" aria-label="Username" aria-describedby="ConfirmarPassword11">
          </div>
          <div class="mb-1 d-none" id="Confirmarpasswordinvalido">
<span class="text-danger ">Password é diferente da sua confirmação</span>
          </div>
      </div>
            <select class="form-select mt-1" id="M_Pagamento">
              <option selected>Escolher</option>
              <option value="1">MBway</option>
              <option value="2">PayPal</option>
              <option value="3">Visa</option>
            </select>
            <div class="mb-1 d-none" id="M_Pagamentoinvalido">
              <span class="text-danger ">Escolha Método de pagamento</span>
                        </div>
                    </div>
            <div class="mb-3">
            <div class="card d-none" id="selt1">
              <div class="card-body">
                <input type="text" value="" placeholder="Telemovel">
              </div>
            </div>
            <div class="card d-none" id="selt2">
              <div class="card-body">
                <input type="text" value="" placeholder="Telemovel">
              </div>
            </div>
            <div class="card d-none" id="selt3">
              <div class="card-body">
                <input type="text" value="" placeholder="Número do cartão">
                <input type="text" value="" placeholder="Data de expiração">
              
                
               <div class="row">
                Data de expiração:
                <div class="col-1">
                  <select class="form-select" id="Data de expiração">
                    <option selected>--</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                  </select>
                </div>
                  <div class="col-2">
                    <select class="form-select" id="ano1a">
                      <option selected>----</option>
                      <option value="2022">2022</option>
                      <option value="2023">2023</option>
                      <option value="2024">2024</option>
                      <option value="2025">2025</option>
                      <option value="2026">2026</option>
                      <option value="2027">2027</option>
                      <option value="2028">2028</option>
                      <option value="2029">2029</option>
                      <option value="2030">2030</option>
                      <option value="2031">2031</option>
                      <option value="2032">2032</option>
                      <option value="2033">2033</option>
                      <option value="2034">2034</option>
                      <option value="2035">2035</option>
                      <option value="2036">2036</option>
                      <option value="2037">2037</option>
                      <option value="2038">2038</option>
                      <option value="2039">2039</option>
                      <option value="2040">2040</option>
                      <option value="2041">2041</option>
                      <option value="2042">2042</option>
                      <option value="2043">2043</option>
                      <option value="2044">2044</option>
                      <option value="2045">2045</option>
                      <option value="2046">2046</option>

                    </select>
                  
                  </div>
               </div>
                
                <input type="text" value="" placeholder="Código de segurança">

              </div>
            </div>
          </div>
            <p class="card-text" style="text-align: center;">  <input id="Button_Criar_Conta" class="btn btn-primary  btn-lg" type="button" value="Criar Conta" > </p>
    
      </div>
      </div>


    
    <script>
      $(document).ready(()=>{
        $("#M_Pagamento").change(()=>{
          /*
               if (nome.length < 3) {
        document.getElementById("NomeError").classList.remove("d-none");
        return false;
    } else {
        if (!document.getElementById("NomeError").classList.contains("d-none")) {
            document.getElementById("NomeError").classList.add("d-none");
        }
        return true
    }
          */
          switch ($("#M_Pagamento").val()) {
            case "1":
            document.getElementById("selt1").classList.remove("d-none");
            document.getElementById("selt2").classList.add("d-none");
            document.getElementById("selt3").classList.add("d-none");
            $('#M_Pagamentoinvalido').addClass('d-none');  
            break;
            case "2":
            document.getElementById("selt1").classList.add("d-none");
            document.getElementById("selt2").classList.remove("d-none");
            document.getElementById("selt3").classList.add("d-none");
            $('#M_Pagamentoinvalido').addClass('d-none'); 
            break;
            case "3":
            document.getElementById("selt1").classList.add("d-none");
            document.getElementById("selt2").classList.add("d-none");
            document.getElementById("selt3").classList.remove("d-none");
            $('#M_Pagamentoinvalido').addClass('d-none');
            break;
          
            default:
            document.getElementById("selt1").classList.add("d-none");
            document.getElementById("selt2").classList.add("d-none");
            document.getElementById("selt3").classList.add("d-none");
              break;
          }
        })
        $("#Button_Criar_Conta").click(function () {
          var RetVal = true;
          if( $("#Password1").val()== $("#Password2").val()){
                  $('#Confirmarpasswordinvalido').removeClass("d-block");
                  $('#Confirmarpasswordinvalido').addClass('d-none');
              }
              else {
                  RetVal = false;
                  $('#Confirmarpasswordinvalido').addClass("d-block");
                  $('#Confirmarpasswordinvalido').removeClass('d-none');

              }
          
          
              
              var email = $('#Mail').val();
             
              if (email.includes("@")&&email.includes(".")) {
                  $('#Emailinvalido').removeClass("d-block");
                  $('#Emailinvalido').addClass('d-none');
              }
              else {
                  RetVal = false;
                  $('#Emailinvalido').addClass("d-block");
                  $('#Emailinvalido').removeClass('d-none');

              }
               if (email.includes("@")&&email.includes(".")) {
                  $('#Emailinvalido').removeClass("d-block");
                  $('#Emailinvalido').addClass('d-none');
              }
              else {
                  RetVal = false;
                  $('#Emailinvalido').addClass("d-block");
                  $('#Emailinvalido').removeClass('d-none');

              }
              var array = JSON.parse(window.localStorage.getItem('Lista_clients'));
              console.log(array);
              var EmailNaoExiste=true;
              for (let index = 0; index < array.length; index++) {
                  const element = array[index];
                  if(element.Mail==email){
                  EmailNaoExiste=false;
                      break;
                  }
              }
              if (EmailNaoExiste) {
                  $('#Emailinvalido1').removeClass("d-block");
                  $('#Emailinvalido1').addClass('d-none');
              }
              else {
                  RetVal = false;
                  $('#Emailinvalido1').addClass("d-block");
                  $('#Emailinvalido1').removeClass('d-none');

              }

              
              //var regex = /^(?=.\d)(?=.[a-z])(?=.*[A-Z]).{6,20}$/;
              if ($('#Password1').val().length>4) {
                  $('#PassInvalido').removeClass("d-block");
                  $('#PassInvalido').addClass('d-none');
              }
              else {
                  RetVal = false;
                  $('#PassInvalido').addClass("d-block");
                  $('#PassInvalido').removeClass('d-none');


              }
              if ($('#Nome').val().length>4) {
                  $('#nomeinvalido').removeClass("d-block");
                  $('#nomeinvalido').addClass('d-none');
              }
              else {
                  RetVal = false;
                  $('#nomeinvalido').addClass("d-block");
                  $('#nomeinvalido').removeClass('d-none');


              }
              
              if ($('#Morada').val().length>4) {
                  $('#Moradainvalido').removeClass("d-block");
                  $('#Moradainvalido').addClass('d-none');
              }
              else {
                  RetVal = false;
                  $('#Moradainvalido').addClass("d-block");
                  $('#Moradainvalido').removeClass('d-none');


              }
              
             
              if (!"123".includes($("#M_Pagamento").val())) {
                  $('#M_Pagamentoinvalido').removeClass('d-none');
                  RetVal = false;
              }
              else {
                  $('#M_Pagamentoinvalido').addClass('d-none');
              }
              
              if ($("#Nif").val().length!=8) {
                  $('#Nifinvalido').removeClass('d-none');
                  RetVal = false;
              }
              else {
                  $('#Nifinvalido').addClass('d-none');
              }
              
           if(!RetVal){return}

       
      

            let cadastro = {
                Nome: $("#Nome").val(),
                Mail: $("#Mail").val(),
                Morada: $("#Morada").val(),
                Nif: $("#Nif").val(),
                Password1: $("#Password1").val(),
                M_Pagamento: $("#M_Pagamento").val(),
                Animais:[],
                Plano:"0",
                Encomendas:[],
                Consultas:[]



            }
            //window.localStorage.setItem('Lista_clients', '[]');
            if (JSON.parse(window.localStorage.getItem('Lista_clients')) == null) {
                window.localStorage.setItem('Lista_clients', '[]');
                var a = JSON.parse(window.localStorage.getItem('Lista_clients'));
                console.log(a)
                b = a.concat([cadastro]);
                window.localStorage.setItem('Lista_clients', JSON.stringify(b));  
            } else {
                console.log("Existe Lista_clients")
                var a = JSON.parse(window.localStorage.getItem('Lista_clients'));
                b = a.concat([cadastro]);
                window.localStorage.setItem('Lista_clients', JSON.stringify(b));
            } 
            console.log(window.sessionStorage.getItem('Lista_clients'))
            window.sessionStorage.setItem('Login',String( $("#Mail").val()));
           window.location = 'Pagina_inical.html'
        })
      })
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>